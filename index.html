<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Two-Digit Cipher (00 word break)</title>
  <style>
    :root{
      --bg:#0b132b;
      --panel:#0f172a;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#64748b;
      --border:rgba(15,23,42,0.14);
      --accent:#38bdf8;
      --good:#22c55e;
      --bad:#ef4444;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background: radial-gradient(1000px 600px at 10% 0%, #1f2a56 0%, var(--bg) 45%, #0b1024 100%);
      color:#fff;
      padding: 18px;
    }
    .wrap{ max-width: 980px; margin: 0 auto; }
    header{ margin-bottom: 14px; }
    h1{
      margin:0 0 6px 0;
      font-size: 20px;
      letter-spacing:.2px;
      font-weight: 800;
    }
    header p{
      margin:0;
      color: rgba(255,255,255,0.78);
      font-size: 13px;
      line-height: 1.35;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    @media (min-width: 900px){
      .grid{ grid-template-columns: 1fr 1fr; }
    }

    .card{
      background: rgba(255,255,255,0.96);
      color: var(--text);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 16px;
      padding: 14px;
      box-shadow: 0 18px 55px rgba(0,0,0,0.35);
    }

    label{
      display:block;
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 6px;
      font-weight: 650;
    }

    textarea, input[type="text"]{
      width:100%;
      border-radius: 14px;
      border: 1px solid var(--border);
      outline: none;
      font-size: 15px;
      line-height: 1.45;
      padding: 12px;
      background:#fff;
      color:#0f172a;
    }
    textarea{
      min-height: 200px;
      resize: vertical;
    }
    textarea:focus, input[type="text"]:focus{
      border-color: rgba(56,189,248,.75);
      box-shadow: 0 0 0 3px rgba(56,189,248,.22);
    }

    .controls{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      align-items:center;
      margin-top: 10px;
    }
    .pill{
      display:flex;
      gap:8px;
      align-items:center;
      padding: 8px 10px;
      border: 1px solid var(--border);
      border-radius: 999px;
      background: #fff;
      font-size: 13px;
      color:#0f172a;
    }
    .pill input{ transform: translateY(1px); }

    button{
      appearance:none;
      border: 1px solid var(--border);
      background: #fff;
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 750;
      cursor:pointer;
      font-size: 13px;
      color:#0f172a;
    }
    button.primary{
      border-color: rgba(56,189,248,.55);
      box-shadow: 0 0 0 3px rgba(56,189,248,.16);
    }
    button:hover{
      border-color: rgba(56,189,248,.8);
      box-shadow: 0 0 0 3px rgba(56,189,248,.18);
    }

    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .row > *{ flex: 1 1 160px; }

    .note{
      margin-top:10px;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.35;
    }

    .status{
      margin-top:10px;
      padding:10px 12px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background:#f8fafc;
      font-size: 12px;
      color:#0f172a;
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .badge{
      font-weight:800;
      padding:4px 10px;
      border-radius:999px;
      color:#fff;
      font-size: 12px;
      line-height: 1.6;
      align-self:flex-start;
    }
    .ok{ background: var(--good); }
    .warn{ background: #f59e0b; }
    .bad{ background: var(--bad); }

    details{
      margin-top: 10px;
      border-top: 1px solid rgba(15,23,42,0.08);
      padding-top: 8px;
    }
    summary{
      cursor:pointer;
      user-select:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size: 12px;
      color: var(--muted);
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #fff;
    }
    summary::-webkit-details-marker{ display:none; }

    .mapbox{
      margin-top:10px;
      padding: 10px;
      border-radius: 14px;
      background: #f8fafc;
      border: 1px dashed rgba(15,23,42,0.22);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      color:#0f172a;
      overflow:auto;
      white-space: pre;
      max-height: 240px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <h1>Two-Digit Cipher</h1>
      <p>Each letter → a fixed 2-digit code. <b>00</b> is the word break. Mobile-friendly, copy-friendly, no nonsense.</p>
    </header>

    <div class="grid">
      <!-- ENCODER -->
      <div class="card">
        <label for="plain">Encoder (English → numbers)</label>
        <textarea id="plain" placeholder="Type: The car is white"></textarea>

        <div class="controls">
          <div class="pill">
            <input type="checkbox" id="groupBy2" checked>
            <label for="groupBy2" style="margin:0;color:inherit;">Group output (spaces every 2 digits)</label>
          </div>

          <div class="pill">
            <input type="checkbox" id="keepSpacesReadable">
            <label for="keepSpacesReadable" style="margin:0;color:inherit;">Show word breaks as 00 (with spaces)</label>
          </div>

          <button class="primary" id="copyCipher" type="button">Copy cipher</button>
          <button id="clearPlain" type="button">Clear</button>
        </div>

        <div class="note">
          Encoder keeps letters A–Z and spaces. Everything else (punctuation, emojis) is dropped so the output stays “digits-only.”
        </div>

        <label for="cipherOut" style="margin-top:10px;">Cipher output</label>
        <textarea id="cipherOut" readonly placeholder="Output appears here..."></textarea>

        <div class="status" id="encStatus">
          <span id="encMsg">Ready.</span>
          <span class="badge ok" id="encBadge">OK</span>
        </div>
      </div>

      <!-- DECODER -->
      <div class="card">
        <label for="cipherIn">Decoder (numbers → English)</label>
        <textarea id="cipherIn" placeholder="Paste digits here… (spaces/newlines ok). 00 = word break."></textarea>

        <div class="controls">
          <div class="pill">
            <input type="checkbox" id="showUnknownAsBrackets" checked>
            <label for="showUnknownAsBrackets" style="margin:0;color:inherit;">Unknown codes as [xx]</label>
          </div>

          <button class="primary" id="copyPlain" type="button">Copy plain</button>
          <button id="clearCipher" type="button">Clear</button>
        </div>

        <label for="plainOut" style="margin-top:10px;">Plain output</label>
        <textarea id="plainOut" readonly placeholder="Decoded text appears here..."></textarea>

        <div class="status" id="decStatus">
          <span id="decMsg">Ready.</span>
          <span class="badge ok" id="decBadge">OK</span>
        </div>

        <details>
          <summary>Show mapping</summary>
          <div class="mapbox" id="mapbox"></div>
        </details>
      </div>
    </div>
  </div>

  <script>
    // ====== YOUR CURRENT LOCKED MAP ======
    const ENC = Object.freeze({
      A:"07", B:"05", C:"11", D:"02", E:"12", F:"04", G:"09", H:"13", I:"06",
      J:"14", K:"10", L:"08", M:"16", N:"20", O:"24", P:"17", Q:"18", R:"15",
      S:"01", T:"03", U:"21", V:"19", W:"23", X:"25", Y:"26", Z:"22"
    });

    const DEC = Object.freeze(Object.fromEntries(Object.entries(ENC).map(([k,v]) => [v,k])));
    const WORD_BREAK = "00";

    const plainEl = document.getElementById("plain");
    const cipherOutEl = document.getElementById("cipherOut");
    const cipherInEl = document.getElementById("cipherIn");
    const plainOutEl = document.getElementById("plainOut");

    const groupBy2El = document.getElementById("groupBy2");
    const keepSpacesReadableEl = document.getElementById("keepSpacesReadable");
    const showUnknownAsBracketsEl = document.getElementById("showUnknownAsBrackets");

    const copyCipherBtn = document.getElementById("copyCipher");
    const copyPlainBtn = document.getElementById("copyPlain");
    const clearPlainBtn = document.getElementById("clearPlain");
    const clearCipherBtn = document.getElementById("clearCipher");

    const encMsg = document.getElementById("encMsg");
    const encBadge = document.getElementById("encBadge");
    const decMsg = document.getElementById("decMsg");
    const decBadge = document.getElementById("decBadge");

    const mapbox = document.getElementById("mapbox");

    function setStatus(which, level, msg){
      const badge = which === "enc" ? encBadge : decBadge;
      const text  = which === "enc" ? encMsg   : decMsg;

      text.textContent = msg;

      badge.classList.remove("ok","warn","bad");
      if (level === "ok") badge.classList.add("ok");
      if (level === "warn") badge.classList.add("warn");
      if (level === "bad") badge.classList.add("bad");

      badge.textContent = level.toUpperCase();
    }

    function normalizePlain(s){
      // keep A-Z and spaces only (digits-only cipher output)
      // convert everything else to "" (dropped)
      return (s || "")
        .toUpperCase()
        .replace(/[^A-Z ]+/g, "")   // drop punctuation etc
        .replace(/\s+/g, " ")       // collapse whitespace
        .trim();
    }

    function encode(plain){
      const clean = normalizePlain(plain);

      if (!clean){
        return { out: "", note: "Type something (letters and spaces).", level: "warn" };
      }

      const tokens = [];
      for (const ch of clean){
        if (ch === " "){
          tokens.push(WORD_BREAK);
        } else {
          tokens.push(ENC[ch] ?? "??");
        }
      }

      // If user wants "00" visible as word breaks (with spaces), we keep it separated nicely.
      // Otherwise we just concatenate.
      let outRaw = tokens.join("");

      // Format output
      const group = groupBy2El.checked;

      if (keepSpacesReadableEl.checked){
        // show word breaks as " 00 " and group digits in pairs everywhere else
        // We'll rebuild as an array of pieces, where "00" becomes its own piece.
        const pieces = [];
        for (const tok of tokens){
          pieces.push(tok);
        }

        if (group){
          // put spaces between every 2 digits, but keep 00 intact (it already is)
          // easiest: join pieces then re-split with special handling around 00
          // We'll instead format each piece: if it's 00 keep, else it's 2-digit already.
          outRaw = pieces.join(" ");
        } else {
          outRaw = pieces.join("");
        }

        return {
          out: outRaw,
          note: `Encoded ${clean.length} chars. Word breaks = 00.`,
          level: "ok"
        };
      }

      if (group){
        // spaces every 2 digits
        outRaw = outRaw.replace(/(\d{2})/g, "$1 ").trim();
      }

      return {
        out: outRaw,
        note: `Encoded ${clean.length} chars. (00 used internally for spaces.)`,
        level: "ok"
      };
    }

    function normalizeCipher(s){
      // allow spaces/newlines/pipes/dots etc; keep digits only
      return (s || "").replace(/\D+/g, "");
    }

    function decode(cipherText){
      const digits = normalizeCipher(cipherText);

      if (!digits){
        return { out: "", note: "Paste digits to decode. (Non-digits are ignored.)", level: "warn" };
      }
      if (digits.length % 2 !== 0){
        return { out: "", note: `Odd number of digits (${digits.length}). Need pairs like 03 12 01…`, level: "bad" };
      }

      const parts = [];
      let unknownCount = 0;

      for (let i = 0; i < digits.length; i += 2){
        const code = digits.slice(i, i + 2);

        if (code === WORD_BREAK){
          parts.push(" ");
          continue;
        }

        const letter = DEC[code];
        if (letter){
          parts.push(letter);
        } else {
          unknownCount++;
          parts.push(showUnknownAsBracketsEl.checked ? `[${code}]` : "?");
        }
      }

      const out = parts.join("").replace(/\s+/g, " ").trim();

      if (unknownCount > 0){
        return {
          out,
          note: `Decoded with ${unknownCount} unknown code(s).`,
          level: "warn"
        };
      }

      return { out, note: "Decoded cleanly.", level: "ok" };
    }

    function renderMap(){
      const lines = [];
      lines.push("WORD BREAK: 00");
      lines.push("");
      lines.push("LETTER → CODE");
      const entries = Object.entries(ENC).sort((a,b)=>a[0].localeCompare(b[0]));
      for (const [L,code] of entries){
        lines.push(`${L} → ${code}`);
      }
      mapbox.textContent = lines.join("\n");
    }

    function updateAll(){
      // encode
      const enc = encode(plainEl.value);
      cipherOutEl.value = enc.out;
      setStatus("enc", enc.level, enc.note);

      // decode
      const dec = decode(cipherInEl.value);
      plainOutEl.value = dec.out;
      setStatus("dec", dec.level, dec.note);
    }

    // Events
    plainEl.addEventListener("input", updateAll);
    cipherInEl.addEventListener("input", updateAll);

    groupBy2El.addEventListener("change", updateAll);
    keepSpacesReadableEl.addEventListener("change", updateAll);
    showUnknownAsBracketsEl.addEventListener("change", updateAll);

    clearPlainBtn.addEventListener("click", () => {
      plainEl.value = "";
      cipherOutEl.value = "";
      updateAll();
      plainEl.focus();
    });

    clearCipherBtn.addEventListener("click", () => {
      cipherInEl.value = "";
      plainOutEl.value = "";
      updateAll();
      cipherInEl.focus();
    });

    copyCipherBtn.addEventListener("click", async () => {
      try{
        await navigator.clipboard.writeText(cipherOutEl.value);
        copyCipherBtn.textContent = "Copied!";
        setTimeout(()=>copyCipherBtn.textContent="Copy cipher", 900);
      } catch(e){
        alert("Copy failed (clipboard permission). You can manually select + copy.");
      }
    });

    copyPlainBtn.addEventListener("click", async () => {
      try{
        await navigator.clipboard.writeText(plainOutEl.value);
        copyPlainBtn.textContent = "Copied!";
        setTimeout(()=>copyPlainBtn.textContent="Copy plain", 900);
      } catch(e){
        alert("Copy failed (clipboard permission). You can manually select + copy.");
      }
    });

    // Init
    renderMap();
    updateAll();
  </script>
</body>
</html>